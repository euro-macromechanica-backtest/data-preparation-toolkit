# ‚öôÔ∏è Economic Calendar Normalizer

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π: –ø–µ—Ä–µ–≤–æ–¥ –≤ UTC (IANA/DST), –≤—Å—Ç–∞–≤–∫–∞ `datetime_utc` –ø–æ—Å–ª–µ `event`, —É–¥–∞–ª–µ–Ω–∏–µ `local_dt`/`source_tz`, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å CSV. 

---

## üìö –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä:
- –ß–∏—Ç–∞–µ—Ç CSV (UTF-8; **—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `;`**; –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è BOM).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `local_dt` (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞) –∏ `source_tz` (IANA).
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ UTC –ø–æ –±–∞–∑–µ IANA (`tzdata==2025.2`) —Å —É—á—ë—Ç–æ–º DST/–ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
- –°–æ–∑–¥–∞—ë—Ç `datetime_utc` `YYYY-MM-DDTHH:MM:SS+00:00`, –≤—Å—Ç–∞–≤–ª—è–µ—Ç **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `event`**.
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç `local_dt` –∏ `source_tz` –∏–∑ –≤—ã—Ö–æ–¥–∞.
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –ø–æ `datetime_utc` –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é.
- –ü–∏—à–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CSV: UTF-8 (–±–µ–∑ BOM), `;`, LF (`\n`). –ò–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `<input>_UTC.csv`.

**–§–æ—Ä–º–∞—Ç—ã `local_dt`**

–ê–≤—Ç–æ-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ: ISO, `YYYY-MM-DD HH:MM[:SS]`, US `MM/DD/YYYY ...` (–≤–∫–ª. AM/PM), EU `DD/MM/YYYY ...`, EU `DD.MM.YYYY ...`.
–í—Ö–æ–¥ **–Ω–µ –¥–æ–ª–∂–µ–Ω** –≤–∫–ª—é—á–∞—Ç—å —Å–º–µ—â–µ–Ω–∏–µ/—Ç–∞–π–º–∑–æ–Ω—É –≤ `local_dt` (`+02:00`, `Z`).

**DST –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**

- –û—Å–µ–Ω—å (–¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è) ‚Üí `--ambiguous latest` (–≤—Ç–æ—Ä–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ).
- –í–µ—Å–Ω–∞ (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –≤—Ä–µ–º—è) ‚Üí `--nonexistent shift_forward` (—Å–¥–≤–∏–≥ –≤–ø–µ—Ä—ë–¥).
–ú–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å —Ñ–ª–∞–≥–∞–º–∏ –≤ –∫–æ–º–∞–Ω–¥–µ.

**–¢–∞–π–º–∑–æ–Ω—ã (IANA)**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî allow-list –°–®–ê/–ï–≤—Ä–æ–∑–æ–Ω—ã.

–ß–∞—Å—Ç—ã–µ —Å–∏–Ω–æ–Ω–∏–º—ã:
- `Europe/Frankfurt` ‚Üí **`Europe/Berlin`**
- `Europe/Kiev` ‚Üí **`Europe/Kyiv`**
- `CET`/`CEST` ‚Üí **`Europe/Berlin`**
- `EST`/`EDT` ‚Üí **`America/New_York`**

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python 3.13.5

python-dateutil==2.9.0.post0
tzdata==2025.2

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üçé/üêß macOS/Linux (bash/zsh)
```bash
# –í –ø–∞–ø–∫–µ —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º:
python3 -m venv .venv && source .venv/bin/activate
python -m pip install --upgrade pip
pip install -r requirements.txt    # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (UTC + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ + –∑–∞–ø–∏—Å—å *_UTC.csv —Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–º)
python core_calendar_normalizer.py ./calendar_2001.csv
# Output: ./calendar_2001_UTC.csv
```

### ü™ü Windows (PowerShell)
```powershell
# –í –ø–∞–ø–∫–µ —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º:
python -m venv .venv
.\.venv\Scripts\Activate.ps1
python -m pip install --upgrade pip
pip install -r requirements.txt    # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (–û–ë–´–ß–ù–´–ô –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å ‚Äî –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ \)
python .\core_calendar_normalizer.py .\calendar_2001.csv
# Output: ./calendar_2001_UTC.csv
```